"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[9460],{84764:(Z,T,t)=>{t.r(T),t.d(T,{default:()=>se});var e=t(32735),b=t(84968),l=t(5636),P=t(83281),n=t(88425),O=t(94638),w=t(27649),L=t(28356),p=t(17e3),A=t(41415),B=t(62345),M=t(27677),r=t(70218),d=t(84967),u=t(88860),f=t(15335),y=t(5803),F=t(66456),G=t(88369),c=t(59677);const Y=[{intlLabel:{id:(0,c.OB)("EditForm.inputToggle.label.email"),defaultMessage:"One account per email address"},description:{id:(0,c.OB)("EditForm.inputToggle.description.email"),defaultMessage:"Disallow the user to create multiple accounts using the same email address with different authentication providers."},name:"unique_email",type:"bool",size:{col:12,xs:12}},{intlLabel:{id:(0,c.OB)("EditForm.inputToggle.label.sign-up"),defaultMessage:"Enable sign-ups"},description:{id:(0,c.OB)("EditForm.inputToggle.description.sign-up"),defaultMessage:"When disabled (OFF), the registration process is forbidden. No one can subscribe anymore no matter the used provider."},name:"allow_register",type:"bool",size:{col:12,xs:12}},{intlLabel:{id:(0,c.OB)("EditForm.inputToggle.label.email-reset-password"),defaultMessage:"Reset password page"},description:{id:(0,c.OB)("EditForm.inputToggle.description.email-reset-password"),defaultMessage:"URL of your application's reset password page."},placeholder:{id:(0,c.OB)("EditForm.inputToggle.placeholder.email-reset-password"),defaultMessage:"ex: https://youtfrontend.com/reset-password"},name:"email_reset_password",type:"text",size:{col:6,xs:12}},{intlLabel:{id:(0,c.OB)("EditForm.inputToggle.label.email-confirmation"),defaultMessage:"Enable email confirmation"},description:{id:(0,c.OB)("EditForm.inputToggle.description.email-confirmation"),defaultMessage:"When enabled (ON), new registered users receive a confirmation email."},name:"email_confirmation",type:"bool",size:{col:12,xs:12}},{intlLabel:{id:(0,c.OB)("EditForm.inputToggle.label.email-confirmation-redirection"),defaultMessage:"Redirection url"},description:{id:(0,c.OB)("EditForm.inputToggle.description.email-confirmation-redirection"),defaultMessage:"After you confirmed your email, choose where you will be redirected."},placeholder:{id:(0,c.OB)("EditForm.inputToggle.placeholder.email-confirmation-redirection"),defaultMessage:"ex: https://youtfrontend.com/email-confirmation"},name:"email_confirmation_redirection",type:"text",size:{col:6,xs:12}}];var S=t(5173);const a=new RegExp("(^$)|((.+:\\/\\/.*)(d*)\\/?(.*))"),o=S.Ry().shape({email_confirmation_redirection:S.nK().when("email_confirmation",{is:!0,then:S.Z_().matches(a).required(),otherwise:S.Z_().nullable()}),email_reset_password:S.Z_(n.translatedErrors.string).matches(a,n.translatedErrors.regex).nullable()});var s=(m,g,v)=>new Promise((W,j)=>{var K=h=>{try{D(v.next(h))}catch(I){j(I)}},N=h=>{try{D(v.throw(h))}catch(I){j(I)}},D=h=>h.done?W(h.value):Promise.resolve(h.value).then(K,N);D((v=v.apply(m,g)).next())});const E=()=>s(void 0,null,function*(){const{data:m}=yield c.be.get((0,c.Gc)("advanced"));return m}),x=m=>c.be.put((0,c.Gc)("advanced"),m);var C=Object.defineProperty,$=Object.defineProperties,J=Object.getOwnPropertyDescriptors,V=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,q=(m,g,v)=>g in m?C(m,g,{enumerable:!0,configurable:!0,writable:!0,value:v}):m[g]=v,k=(m,g)=>{for(var v in g||(g={}))Q.call(g,v)&&q(m,v,g[v]);if(V)for(var v of V(g))X.call(g,v)&&q(m,v,g[v]);return m},ee=(m,g)=>$(m,J(g)),te=(m,g,v)=>new Promise((W,j)=>{var K=h=>{try{D(v.next(h))}catch(I){j(I)}},N=h=>{try{D(v.throw(h))}catch(I){j(I)}},D=h=>h.done?W(h.value):Promise.resolve(h.value).then(K,N);D((v=v.apply(m,g)).next())});const ie=()=>e.createElement(n.CheckPagePermissions,{permissions:G.Z.readAdvancedSettings},e.createElement(oe,null)),oe=()=>{const{formatMessage:m}=(0,l.useIntl)(),g=(0,n.useNotification)(),{lockApp:v,unlockApp:W}=(0,n.useOverlayBlocker)(),{notifyStatus:j}=(0,O.G)(),K=(0,b.useQueryClient)();(0,n.useFocusWhenNavigate)();const N=(0,e.useMemo)(()=>({update:G.Z.updateAdvancedSettings}),[]),{isLoading:D,allowedActions:{canUpdate:h}}=(0,n.useRBAC)(N),{status:I,data:ae}=(0,b.useQuery)("advanced",()=>E(),{onSuccess(){j(m({id:(0,c.OB)("Form.advancedSettings.data.loaded"),defaultMessage:"Advanced settings data has been loaded"}))},onError(){g({type:"warning",message:{id:(0,c.OB)("notification.error"),defaultMessage:"An error occured"}})}}),le=D||I!=="success",ne=(0,b.useMutation)(U=>x(U),{onSuccess(){return te(this,null,function*(){yield K.invalidateQueries("advanced"),g({type:"success",message:{id:(0,c.OB)("notification.success.saved"),defaultMessage:"Saved"}}),W()})},onError(){g({type:"warning",message:{id:(0,c.OB)("notification.error"),defaultMessage:"An error occured"}}),W()},refetchActive:!0}),{isLoading:de}=ne,ce=U=>te(void 0,null,function*(){v();const H=U.email_confirmation?U.email_confirmation_redirection:"";yield ne.mutateAsync(ee(k({},U),{email_confirmation_redirection:H}))});return le?e.createElement(w.o,{"aria-busy":"true"},e.createElement(n.SettingsPageTitle,{name:m({id:(0,c.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"})}),e.createElement(L.T,{title:m({id:(0,c.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"})}),e.createElement(p.D,null,e.createElement(n.LoadingIndicatorPage,null))):e.createElement(w.o,{"aria-busy":de},e.createElement(n.SettingsPageTitle,{name:m({id:(0,c.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"})}),e.createElement(P.Formik,{onSubmit:ce,initialValues:ae.settings,validateOnChange:!1,validationSchema:o,enableReinitialize:!0},({errors:U,values:H,handleChange:re,isSubmitting:ue})=>e.createElement(n.Form,null,e.createElement(L.T,{title:m({id:(0,c.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"}),primaryAction:e.createElement(A.z,{loading:ue,type:"submit",disabled:!h,startIcon:e.createElement(F.Z,null),size:"S"},m({id:"global.save",defaultMessage:"Save"}))}),e.createElement(p.D,null,e.createElement(B.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(M.K,{spacing:4},e.createElement(u.Z,{variant:"delta",as:"h2"},m({id:"global.settings",defaultMessage:"Settings"})),e.createElement(f.r,{gap:6},e.createElement(y.P,{col:6,s:12},e.createElement(r.P,{label:m({id:(0,c.OB)("EditForm.inputSelect.label.role"),defaultMessage:"Default role for authenticated users"}),value:H.default_role,hint:m({id:(0,c.OB)("EditForm.inputSelect.description.role"),defaultMessage:"It will attach the new authenticated user to the selected role."}),onChange:R=>re({target:{name:"default_role",value:R}})},ae.roles.map(R=>e.createElement(d.W,{key:R.type,value:R.type},R.name)))),Y.map(R=>{let _=H[R.name];return _||(_=R.type==="bool"?!1:""),e.createElement(y.P,k({key:R.name},R.size),e.createElement(n.GenericInput,ee(k({},R),{value:_,error:U[R.name],disabled:R.name==="email_confirmation_redirection"&&H.email_confirmation===!1,onChange:re})))}))))))))},se=ie},8917:(Z,T,t)=>{t.d(T,{Z:()=>L});var e=t(43653),b=t.n(e),l=t(88425),P=t.n(l),n=(p,A,B)=>new Promise((M,r)=>{var d=y=>{try{f(B.next(y))}catch(F){r(F)}},u=y=>{try{f(B.throw(y))}catch(F){r(F)}},f=y=>y.done?M(y.value):Promise.resolve(y.value).then(d,u);f((B=B.apply(p,A)).next())});const O=b().create({baseURL:"http://localhost:1337"});O.interceptors.request.use(p=>n(void 0,null,function*(){return p.headers={Authorization:`Bearer ${l.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},p}),p=>{Promise.reject(p)}),O.interceptors.response.use(p=>p,p=>{var A;throw((A=p.response)==null?void 0:A.status)===401&&(l.auth.clearAppStorage(),window.location.reload()),p});const L=(0,l.wrapAxiosInstance)(O)},59677:(Z,T,t)=>{t.d(T,{be:()=>e.Z,YX:()=>P,Gc:()=>w,OB:()=>L.Z});var e=t(8917),b=t(92891);const P=p=>Object.keys(p).reduce((A,B)=>{const M=p[B].controllers,r=Object.keys(M).reduce((d,u)=>((0,b.isEmpty)(M[u])||(d[u]=M[u]),d),{});return(0,b.isEmpty)(r)||(A[B]={controllers:r}),A},{});var n=t(90201);const w=p=>`/${n.Z}/${p}`;var L=t(82069)},17e3:(Z,T,t)=>{t.d(T,{D:()=>P});var e=t(32735),b=t(60216),l=t(62345);const P=({children:n})=>e.createElement(l.x,{paddingLeft:10,paddingRight:10},n);P.propTypes={children:b.node.isRequired}},28356:(Z,T,t)=>{t.d(T,{T:()=>z});var e=t(32735),b=t(83292),l=t(60216),P=t(88860),n=t(62345),O=t(36320);const w=a=>{const i=(0,e.useRef)(null),[o,s]=(0,e.useState)(!0),E=([x])=>{s(x.isIntersecting)};return(0,e.useEffect)(()=>{const x=i.current,C=new IntersectionObserver(E,a);return x&&C.observe(i.current),()=>{x&&C.disconnect()}},[i,a]),[i,o]};var L=t(81002);const p=(a,i)=>{const o=(0,L.useCallbackRef)(i);(0,e.useLayoutEffect)(()=>{const s=new ResizeObserver(o);return Array.isArray(a)?a.forEach(E=>{E.current&&s.observe(E.current)}):a.current&&s.observe(a.current),()=>{s.disconnect()}},[a,o])};var A=Object.defineProperty,B=Object.defineProperties,M=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,f=(a,i,o)=>i in a?A(a,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[i]=o,y=(a,i)=>{for(var o in i||(i={}))d.call(i,o)&&f(a,o,i[o]);if(r)for(var o of r(i))u.call(i,o)&&f(a,o,i[o]);return a},F=(a,i)=>B(a,M(i)),G=(a,i)=>{var o={};for(var s in a)d.call(a,s)&&i.indexOf(s)<0&&(o[s]=a[s]);if(a!=null&&r)for(var s of r(a))i.indexOf(s)<0&&u.call(a,s)&&(o[s]=a[s]);return o};const c=()=>{const a=(0,e.useRef)(null),[i,o]=(0,e.useState)(null),[s,E]=w({root:null,rootMargin:"0px",threshold:0});return p(s,()=>{s.current&&o(s.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{a.current&&o(a.current.getBoundingClientRect())},[a]),{containerRef:s,isVisible:E,baseHeaderLayoutRef:a,headerSize:i}},z=a=>{const{containerRef:i,isVisible:o,baseHeaderLayoutRef:s,headerSize:E}=c();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:E==null?void 0:E.height},ref:i},o&&e.createElement(S,y({ref:s},a))),!o&&e.createElement(S,F(y({},a),{sticky:!0,width:E==null?void 0:E.width})))};z.displayName="HeaderLayout";const Y=(0,b.default)(n.x)`
  position: fixed;
  top: 0;
  right: 0;
  width: ${a=>a.width}px;
  z-index: 4;
  box-shadow: ${({theme:a})=>a.shadows.tableShadow};
`,S=e.forwardRef((a,i)=>{var o=a,{navigationAction:s,primaryAction:E,secondaryAction:x,subtitle:C,title:$,sticky:J,width:V}=o,Q=G(o,["navigationAction","primaryAction","secondaryAction","subtitle","title","sticky","width"]);const X=typeof C=="string";return J?e.createElement(Y,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,background:"neutral0",width:V,"data-strapi-header-sticky":!0},e.createElement(O.k,{justifyContent:"space-between"},e.createElement(O.k,null,s&&e.createElement(n.x,{paddingRight:3},s),e.createElement(n.x,null,e.createElement(P.Z,y({variant:"beta",as:"h1"},Q),$),X?e.createElement(P.Z,{variant:"pi",textColor:"neutral600"},C):C),x?e.createElement(n.x,{paddingLeft:4},x):null),e.createElement(O.k,null,E?e.createElement(n.x,{paddingLeft:2},E):void 0))):e.createElement(n.x,{ref:i,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:s?6:8,background:"neutral100","data-strapi-header":!0},s?e.createElement(n.x,{paddingBottom:2},s):null,e.createElement(O.k,{justifyContent:"space-between"},e.createElement(O.k,null,e.createElement(P.Z,y({as:"h1",variant:"alpha"},Q),$),x?e.createElement(n.x,{paddingLeft:4},x):null),E),X?e.createElement(P.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},C):C)});S.displayName="BaseHeaderLayout",S.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},S.propTypes={navigationAction:l.node,primaryAction:l.node,secondaryAction:l.node,sticky:l.bool,subtitle:l.oneOfType([l.string,l.node]),title:l.string.isRequired,width:l.number},z.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},z.propTypes={navigationAction:l.node,primaryAction:l.node,secondaryAction:l.node,subtitle:l.oneOfType([l.string,l.node]),title:l.string.isRequired}},27649:(Z,T,t)=>{t.d(T,{o:()=>M});var e=t(32735),b=t(60216),l=t(83292),P=Object.defineProperty,n=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,L=(r,d,u)=>d in r?P(r,d,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[d]=u,p=(r,d)=>{for(var u in d||(d={}))O.call(d,u)&&L(r,u,d[u]);if(n)for(var u of n(d))w.call(d,u)&&L(r,u,d[u]);return r},A=(r,d)=>{var u={};for(var f in r)O.call(r,f)&&d.indexOf(f)<0&&(u[f]=r[f]);if(r!=null&&n)for(var f of n(r))d.indexOf(f)<0&&w.call(r,f)&&(u[f]=r[f]);return u};const B=l.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,M=r=>{var d=r,{labelledBy:u}=d,f=A(d,["labelledBy"]);const y=u||"main-content-title";return e.createElement(B,p({"aria-labelledby":y,id:"main-content",tabIndex:-1},f))};M.defaultProps={labelledBy:void 0},M.propTypes={labelledBy:b.string}}}]);
