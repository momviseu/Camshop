"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[8418],{218:(N,L,t)=>{t.r(L),t.d(L,{default:()=>Le});var e=t(32735),O=t(84968),d=t(5636),r=t(88425),g=t(94638),P=t(27649),I=t(28356),j=t(17e3),m=t(88369),a=t(59677),y=(s,i,l)=>new Promise((D,R)=>{var Z=A=>{try{K(l.next(A))}catch(W){R(W)}},F=A=>{try{K(l.throw(A))}catch(W){R(W)}},K=A=>A.done?D(A.value):Promise.resolve(A.value).then(Z,F);K((l=l.apply(s,i)).next())});const x=()=>y(void 0,null,function*(){const{data:s}=yield a.be.get((0,a.Gc)("email-templates"));return s}),c=s=>a.be.put((0,a.Gc)("email-templates"),s);var u=t(60216),o=t.n(u),T=t(56755),M=t(33827),S=t(94547),U=t(19786),f=t(35658),h=t(3685),b=t(88860),B=t(50563),n=t(99140),p=t(68625),E=t(44647),v=t(66456),C=Object.defineProperty,w=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,Y=(s,i,l)=>i in s?C(s,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[i]=l,V=(s,i)=>{for(var l in i||(i={}))$.call(i,l)&&Y(s,l,i[l]);if(w)for(var l of w(i))X.call(i,l)&&Y(s,l,i[l]);return s};const G=({canUpdate:s,onEditClick:i})=>{const{formatMessage:l}=(0,d.useIntl)();return e.createElement(T.i,{colCount:3,rowCount:3},e.createElement(M.h,null,e.createElement(S.Tr,null,e.createElement(U.Th,{width:"1%"},e.createElement(h.T,null,l({id:(0,a.OB)("Email.template.table.icon.label"),defaultMessage:"icon"}))),e.createElement(U.Th,null,e.createElement(b.Z,{variant:"sigma",textColor:"neutral600"},l({id:(0,a.OB)("Email.template.table.name.label"),defaultMessage:"name"}))),e.createElement(U.Th,{width:"1%"},e.createElement(h.T,null,l({id:(0,a.OB)("Email.template.table.action.label"),defaultMessage:"action"}))))),e.createElement(f.p,null,e.createElement(S.Tr,V({},(0,r.onRowClick)({fn:()=>i("reset_password")})),e.createElement(U.Td,null,e.createElement(n.J,null,e.createElement(E.Z,{"aria-label":l({id:"global.reset-password",defaultMessage:"Reset password"})}))),e.createElement(U.Td,null,e.createElement(b.Z,null,l({id:"global.reset-password",defaultMessage:"Reset password"}))),e.createElement(U.Td,V({},r.stopPropagation),e.createElement(B.h,{onClick:()=>i("reset_password"),label:l({id:(0,a.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:s&&e.createElement(p.Z,null)}))),e.createElement(S.Tr,V({},(0,r.onRowClick)({fn:()=>i("email_confirmation")})),e.createElement(U.Td,null,e.createElement(n.J,null,e.createElement(v.Z,{"aria-label":l({id:(0,a.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"})}))),e.createElement(U.Td,null,e.createElement(b.Z,null,l({id:(0,a.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"}))),e.createElement(U.Td,V({},r.stopPropagation),e.createElement(B.h,{onClick:()=>i("email_confirmation"),label:l({id:(0,a.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:s&&e.createElement(p.Z,null)})))))};G.propTypes={canUpdate:o().bool.isRequired,onEditClick:o().func.isRequired};const k=G;var me=t(83281),ce=t(85025),pe=t(55225),ue=t(31600),Ee=t(11406),ve=t(15335),Q=t(5803),le=t(41415),ae=t(11299),fe=t(10508),H=t(5173);const ye=H.Ry().shape({options:H.Ry().shape({from:H.Ry().shape({name:H.Z_().required(r.translatedErrors.required),email:H.Z_().email(r.translatedErrors.email).required(r.translatedErrors.required)}).required(),response_email:H.Z_().email(r.translatedErrors.email),object:H.Z_().required(r.translatedErrors.required),message:H.Z_().required(r.translatedErrors.required)}).required(r.translatedErrors.required)}),re=({template:s,onToggle:i,onSubmit:l})=>{const{formatMessage:D}=(0,d.useIntl)();return e.createElement(ce.P,{onClose:i,labelledBy:`${D({id:(0,a.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${D({id:(0,a.OB)(s.display),defaultMessage:s.display})}`},e.createElement(pe.x,null,e.createElement(ae.O,{label:`${D({id:(0,a.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${D({id:(0,a.OB)(s.display),defaultMessage:s.display})}`},e.createElement(ae.$,null,D({id:(0,a.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})),e.createElement(ae.$,null,D({id:(0,a.OB)(s.display),defaultMessage:s.display})))),e.createElement(me.Formik,{onSubmit:l,initialValues:s,validateOnChange:!1,validationSchema:ye,enableReinitialize:!0},({errors:R,values:Z,handleChange:F,isSubmitting:K})=>{var A,W,J,_,q,ee,te;return e.createElement(r.Form,null,e.createElement(ue.f,null,e.createElement(ve.r,{gap:5},e.createElement(Q.P,{col:6,s:12},e.createElement(r.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.from.name.label"),defaultMessage:"Shipper name"},name:"options.from.name",onChange:F,value:Z.options.from.name,error:(W=(A=R==null?void 0:R.options)==null?void 0:A.from)==null?void 0:W.name,type:"text"})),e.createElement(Q.P,{col:6,s:12},e.createElement(r.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.from.email.label"),defaultMessage:"Shipper email"},name:"options.from.email",onChange:F,value:Z.options.from.email,error:(_=(J=R==null?void 0:R.options)==null?void 0:J.from)==null?void 0:_.email,type:"text"})),e.createElement(Q.P,{col:6,s:12},e.createElement(r.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.response_email.label"),defaultMessage:"Response email"},name:"options.response_email",onChange:F,value:Z.options.response_email,error:(q=R==null?void 0:R.options)==null?void 0:q.response_email,type:"text"})),e.createElement(Q.P,{col:6,s:12},e.createElement(r.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.object.label"),defaultMessage:"Subject"},name:"options.object",onChange:F,value:Z.options.object,error:(ee=R==null?void 0:R.options)==null?void 0:ee.object,type:"text"})),e.createElement(Q.P,{col:12,s:12},e.createElement(fe.g,{label:D({id:(0,a.OB)("PopUpForm.Email.options.message.label"),defaultMessage:"Message"}),name:"options.message",onChange:F,value:Z.options.message,error:((te=R==null?void 0:R.options)==null?void 0:te.message)&&D({id:R.options.message,defaultMessage:R.options.message})})))),e.createElement(Ee.m,{startActions:e.createElement(le.z,{onClick:i,variant:"tertiary"},"Cancel"),endActions:e.createElement(le.z,{loading:K,type:"submit"},"Finish")}))}))};re.propTypes={template:o().shape({display:o().string,icon:o().string,options:o().shape({from:o().shape({name:o().string,email:o().string}),message:o().string,object:o().string,response_email:o().string})}).isRequired,onSubmit:o().func.isRequired,onToggle:o().func.isRequired};const ge=re;var he=Object.defineProperty,Oe=Object.defineProperties,Pe=Object.getOwnPropertyDescriptors,oe=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,se=(s,i,l)=>i in s?he(s,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[i]=l,Me=(s,i)=>{for(var l in i||(i={}))Te.call(i,l)&&se(s,l,i[l]);if(oe)for(var l of oe(i))be.call(i,l)&&se(s,l,i[l]);return s},Be=(s,i)=>Oe(s,Pe(i)),Re=(s,i,l)=>new Promise((D,R)=>{var Z=A=>{try{K(l.next(A))}catch(W){R(W)}},F=A=>{try{K(l.throw(A))}catch(W){R(W)}},K=A=>A.done?D(A.value):Promise.resolve(A.value).then(Z,F);K((l=l.apply(s,i)).next())});const Ae=()=>e.createElement(r.CheckPagePermissions,{permissions:m.Z.readEmailTemplates},e.createElement(Ce,null)),Ce=()=>{const{formatMessage:s}=(0,d.useIntl)(),{trackUsage:i}=(0,r.useTracking)(),{notifyStatus:l}=(0,g.G)(),D=(0,r.useNotification)(),{lockApp:R,unlockApp:Z}=(0,r.useOverlayBlocker)(),F=(0,e.useRef)(i),K=(0,O.useQueryClient)();(0,r.useFocusWhenNavigate)();const[A,W]=(0,e.useState)(!1),[J,_]=(0,e.useState)(null),q=(0,e.useMemo)(()=>({update:m.Z.updateEmailTemplates}),[]),{isLoading:ee,allowedActions:{canUpdate:te}}=(0,r.useRBAC)(q),{status:xe,data:ie}=(0,O.useQuery)("email-templates",()=>x(),{onSuccess(){l(s({id:(0,a.OB)("Email.template.data.loaded"),defaultMessage:"Email templates has been loaded"}))},onError(){D({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),De=ee||xe!=="success",ne=()=>{W(z=>!z)},Ie=z=>{_(z),ne()},de=(0,O.useMutation)(z=>c({"email-templates":z}),{onSuccess(){return Re(this,null,function*(){yield K.invalidateQueries("email-templates"),D({type:"success",message:{id:"notification.success.saved",defaultMessage:"Saved"}}),F.current("didEditEmailTemplates"),Z(),ne()})},onError(){D({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}}),Z()},refetchActive:!0}),{isLoading:je}=de,Ue=z=>{R(),F.current("willEditEmailTemplates");const Se=Be(Me({},ie),{[J]:z});de.mutate(Se)};return De?e.createElement(P.o,{"aria-busy":"true"},e.createElement(r.SettingsPageTitle,{name:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(I.T,{title:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(j.D,null,e.createElement(r.LoadingIndicatorPage,null))):e.createElement(P.o,{"aria-busy":je},e.createElement(r.SettingsPageTitle,{name:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(I.T,{title:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(j.D,null,e.createElement(k,{onEditClick:Ie,canUpdate:te}),A&&e.createElement(ge,{template:ie[J],onToggle:ne,onSubmit:Ue})))},Le=Ae},8917:(N,L,t)=>{t.d(L,{Z:()=>j});var e=t(43653),O=t.n(e),d=t(88425),r=t.n(d),g=(m,a,y)=>new Promise((x,c)=>{var u=M=>{try{T(y.next(M))}catch(S){c(S)}},o=M=>{try{T(y.throw(M))}catch(S){c(S)}},T=M=>M.done?x(M.value):Promise.resolve(M.value).then(u,o);T((y=y.apply(m,a)).next())});const P=O().create({baseURL:"http://localhost:1337"});P.interceptors.request.use(m=>g(void 0,null,function*(){return m.headers={Authorization:`Bearer ${d.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},m}),m=>{Promise.reject(m)}),P.interceptors.response.use(m=>m,m=>{var a;throw((a=m.response)==null?void 0:a.status)===401&&(d.auth.clearAppStorage(),window.location.reload()),m});const j=(0,d.wrapAxiosInstance)(P)},59677:(N,L,t)=>{t.d(L,{be:()=>e.Z,YX:()=>r,Gc:()=>I,OB:()=>j.Z});var e=t(8917),O=t(92891);const r=m=>Object.keys(m).reduce((a,y)=>{const x=m[y].controllers,c=Object.keys(x).reduce((u,o)=>((0,O.isEmpty)(x[o])||(u[o]=x[o]),u),{});return(0,O.isEmpty)(c)||(a[y]={controllers:c}),a},{});var g=t(90201);const I=m=>`/${g.Z}/${m}`;var j=t(82069)},11299:(N,L,t)=>{t.d(L,{$:()=>M,O:()=>U});var e=t(32735),O=t(60216),d=t(83292),r=t(77277),g=t(88860),P=t(62345),I=t(36320),j=t(3685),m=Object.defineProperty,a=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,c=(f,h,b)=>h in f?m(f,h,{enumerable:!0,configurable:!0,writable:!0,value:b}):f[h]=b,u=(f,h)=>{for(var b in h||(h={}))y.call(h,b)&&c(f,b,h[b]);if(a)for(var b of a(h))x.call(h,b)&&c(f,b,h[b]);return f},o=(f,h)=>{var b={};for(var B in f)y.call(f,B)&&h.indexOf(B)<0&&(b[B]=f[B]);if(f!=null&&a)for(var B of a(f))h.indexOf(B)<0&&x.call(f,B)&&(b[B]=f[B]);return b};const T=(0,d.default)(I.k)`
  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
    path {
      fill: ${({theme:f})=>f.colors.neutral500};
    }
  }
  :last-of-type ${P.x} {
    display: none;
  }
  :last-of-type ${g.Z} {
    color: ${({theme:f})=>f.colors.neutral800};
    font-weight: ${({theme:f})=>f.fontWeights.bold};
  }
`,M=({children:f})=>e.createElement(T,{inline:!0,as:"li"},e.createElement(g.Z,{variant:"pi",textColor:"neutral600"},f),e.createElement(P.x,{"aria-hidden":!0,paddingLeft:3,paddingRight:3},e.createElement(r.default,null)));M.displayName="Crumb",M.propTypes={children:O.node.isRequired};const S=O.shape({type:O.oneOf([M])}),U=f=>{var h=f,{children:b,label:B}=h,n=o(h,["children","label"]);return e.createElement(I.k,u({},n),e.createElement(j.T,null,B),e.createElement("ol",{"aria-hidden":!0},b))};U.displayName="Breadcrumbs",U.propTypes={children:O.oneOfType([O.arrayOf(S),S]).isRequired,label:O.string.isRequired}},17e3:(N,L,t)=>{t.d(L,{D:()=>r});var e=t(32735),O=t(60216),d=t(62345);const r=({children:g})=>e.createElement(d.x,{paddingLeft:10,paddingRight:10},g);r.propTypes={children:O.node.isRequired}},28356:(N,L,t)=>{t.d(L,{T:()=>h});var e=t(32735),O=t(83292),d=t(60216),r=t(88860),g=t(62345),P=t(36320);const I=n=>{const p=(0,e.useRef)(null),[E,v]=(0,e.useState)(!0),C=([w])=>{v(w.isIntersecting)};return(0,e.useEffect)(()=>{const w=p.current,$=new IntersectionObserver(C,n);return w&&$.observe(p.current),()=>{w&&$.disconnect()}},[p,n]),[p,E]};var j=t(81002);const m=(n,p)=>{const E=(0,j.useCallbackRef)(p);(0,e.useLayoutEffect)(()=>{const v=new ResizeObserver(E);return Array.isArray(n)?n.forEach(C=>{C.current&&v.observe(C.current)}):n.current&&v.observe(n.current),()=>{v.disconnect()}},[n,E])};var a=Object.defineProperty,y=Object.defineProperties,x=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,T=(n,p,E)=>p in n?a(n,p,{enumerable:!0,configurable:!0,writable:!0,value:E}):n[p]=E,M=(n,p)=>{for(var E in p||(p={}))u.call(p,E)&&T(n,E,p[E]);if(c)for(var E of c(p))o.call(p,E)&&T(n,E,p[E]);return n},S=(n,p)=>y(n,x(p)),U=(n,p)=>{var E={};for(var v in n)u.call(n,v)&&p.indexOf(v)<0&&(E[v]=n[v]);if(n!=null&&c)for(var v of c(n))p.indexOf(v)<0&&o.call(n,v)&&(E[v]=n[v]);return E};const f=()=>{const n=(0,e.useRef)(null),[p,E]=(0,e.useState)(null),[v,C]=I({root:null,rootMargin:"0px",threshold:0});return m(v,()=>{v.current&&E(v.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{n.current&&E(n.current.getBoundingClientRect())},[n]),{containerRef:v,isVisible:C,baseHeaderLayoutRef:n,headerSize:p}},h=n=>{const{containerRef:p,isVisible:E,baseHeaderLayoutRef:v,headerSize:C}=f();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:C==null?void 0:C.height},ref:p},E&&e.createElement(B,M({ref:v},n))),!E&&e.createElement(B,S(M({},n),{sticky:!0,width:C==null?void 0:C.width})))};h.displayName="HeaderLayout";const b=(0,O.default)(g.x)`
  position: fixed;
  top: 0;
  right: 0;
  width: ${n=>n.width}px;
  z-index: 4;
  box-shadow: ${({theme:n})=>n.shadows.tableShadow};
`,B=e.forwardRef((n,p)=>{var E=n,{navigationAction:v,primaryAction:C,secondaryAction:w,subtitle:$,title:X,sticky:Y,width:V}=E,G=U(E,["navigationAction","primaryAction","secondaryAction","subtitle","title","sticky","width"]);const k=typeof $=="string";return Y?e.createElement(b,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,background:"neutral0",width:V,"data-strapi-header-sticky":!0},e.createElement(P.k,{justifyContent:"space-between"},e.createElement(P.k,null,v&&e.createElement(g.x,{paddingRight:3},v),e.createElement(g.x,null,e.createElement(r.Z,M({variant:"beta",as:"h1"},G),X),k?e.createElement(r.Z,{variant:"pi",textColor:"neutral600"},$):$),w?e.createElement(g.x,{paddingLeft:4},w):null),e.createElement(P.k,null,C?e.createElement(g.x,{paddingLeft:2},C):void 0))):e.createElement(g.x,{ref:p,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:v?6:8,background:"neutral100","data-strapi-header":!0},v?e.createElement(g.x,{paddingBottom:2},v):null,e.createElement(P.k,{justifyContent:"space-between"},e.createElement(P.k,null,e.createElement(r.Z,M({as:"h1",variant:"alpha"},G),X),w?e.createElement(g.x,{paddingLeft:4},w):null),C),k?e.createElement(r.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},$):$)});B.displayName="BaseHeaderLayout",B.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},B.propTypes={navigationAction:d.node,primaryAction:d.node,secondaryAction:d.node,sticky:d.bool,subtitle:d.oneOfType([d.string,d.node]),title:d.string.isRequired,width:d.number},h.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},h.propTypes={navigationAction:d.node,primaryAction:d.node,secondaryAction:d.node,subtitle:d.oneOfType([d.string,d.node]),title:d.string.isRequired}},27649:(N,L,t)=>{t.d(L,{o:()=>x});var e=t(32735),O=t(60216),d=t(83292),r=Object.defineProperty,g=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,j=(c,u,o)=>u in c?r(c,u,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[u]=o,m=(c,u)=>{for(var o in u||(u={}))P.call(u,o)&&j(c,o,u[o]);if(g)for(var o of g(u))I.call(u,o)&&j(c,o,u[o]);return c},a=(c,u)=>{var o={};for(var T in c)P.call(c,T)&&u.indexOf(T)<0&&(o[T]=c[T]);if(c!=null&&g)for(var T of g(c))u.indexOf(T)<0&&I.call(c,T)&&(o[T]=c[T]);return o};const y=d.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,x=c=>{var u=c,{labelledBy:o}=u,T=a(u,["labelledBy"]);const M=o||"main-content-title";return e.createElement(y,m({"aria-labelledby":M,id:"main-content",tabIndex:-1},T))};x.defaultProps={labelledBy:void 0},x.propTypes={labelledBy:O.string}},44647:(N,L,t)=>{t.d(L,{Z:()=>j});var e=t(32735),O=Object.defineProperty,d=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,P=(m,a,y)=>a in m?O(m,a,{enumerable:!0,configurable:!0,writable:!0,value:y}):m[a]=y,I=(m,a)=>{for(var y in a||(a={}))r.call(a,y)&&P(m,y,a[y]);if(d)for(var y of d(a))g.call(a,y)&&P(m,y,a[y]);return m};function j(m){return e.createElement("svg",I({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.681 2.804A9.64 9.64 0 0011.818 2C6.398 2 2 6.48 2 12c0 5.521 4.397 10 9.818 10 2.03 0 4.011-.641 5.67-1.835a9.987 9.987 0 003.589-4.831 1.117 1.117 0 00-.664-1.418 1.086 1.086 0 00-1.393.676 7.769 7.769 0 01-2.792 3.758 7.546 7.546 0 01-4.41 1.428V4.222h.002a7.492 7.492 0 013.003.625 7.61 7.61 0 012.5 1.762l.464.551-2.986 3.042a.186.186 0 00.129.316H22V3.317a.188.188 0 00-.112-.172.179.179 0 00-.199.04l-2.355 2.4-.394-.468-.02-.02a9.791 9.791 0 00-3.239-2.293zm-3.863 1.418V2v2.222zm0 0v15.556c-4.216 0-7.636-3.484-7.636-7.778s3.42-7.777 7.636-7.778z",fill:"#212134"}))}}}]);
