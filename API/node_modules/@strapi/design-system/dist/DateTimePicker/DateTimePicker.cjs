"use strict";var B=Object.defineProperty;var F=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var E=(e,r,i)=>r in e?B(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i,y=(e,r)=>{for(var i in r||(r={}))$.call(r,i)&&E(e,i,r[i]);if(F)for(var i of F(r))H.call(r,i)&&E(e,i,r[i]);return e};var M=(e,r)=>{var i={};for(var a in e)$.call(e,a)&&r.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&F)for(var a of F(e))r.indexOf(a)<0&&H.call(e,a)&&(i[a]=e[a]);return i};Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const p=require("react"),I=require("../Stack/Stack.cjs"),G=require("../DatePicker/DatePicker.cjs"),J=require("../TimePicker/TimePicker.cjs"),K=require("../Field/Field.cjs"),N=require("../Field/FieldLabel.cjs");require("../Field/FieldInput.cjs");const Q=require("../Field/FieldHint.cjs"),U=require("../Field/FieldError.cjs");require("../Field/FieldContext.cjs");require("../Field/FieldAction.cjs");const b=require("../helpers/useId.cjs"),h=require("./parseDate.cjs"),w=require("./DateTimePickerProps.cjs"),W=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},d=W(p),T=X=>{var S=X,{ariaLabel:e,clearLabel:r,disabled:i,error:a,hint:_,label:m,labelAction:L,onChange:l,onClear:P,name:g,required:V,selectButtonTitle:v,size:j,step:C,value:n}=S,D=M(S,["ariaLabel","clearLabel","disabled","error","hint","label","labelAction","onChange","onClear","name","required","selectButtonTitle","size","step","value"]);const u=h.parseDate(n),[c,f]=p.useState(u),[k,o]=p.useState(u?`${u.getHours()}:${u.getMinutes()}:${u.getSeconds()}`:null),R=t=>{f(t);let s;k?(s=new Date(t),s.setHours(k.split(":")[0]),s.setMinutes(k.split(":")[1])):(s=new Date(t),o(`${s.getHours()}:${s.getMinutes()}:${s.getSeconds()}`)),l&&l(s)},x=t=>{o(t);const s=c?new Date(c):new Date;s.setHours(t.split(":")[0]),s.setMinutes(t.split(":")[1]),c||f(s),l&&l(s)},A=()=>{f(void 0),o(void 0),P()},O=()=>{o(void 0);let t;c&&(t=new Date(c),t.setHours("00"),t.setMinutes("00")),l&&l(t)};p.useEffect(()=>{if(n&&+n!=+c){const t=h.parseDate(n);f(t),o(t?`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}`:null)}else n||(f(void 0),o(void 0))},[n,c]);const q=b.useId("datetime-label",D==null?void 0:D.id),z=b.useId("datetimepicker");return d.default.createElement(K.Field,{name:g,role:"group","aria-labelledby":q,hint:_,error:a},d.default.createElement(I.Stack,{spacing:1},m&&d.default.createElement(N.FieldLabel,{required:V,action:L,id:q},m),d.default.createElement(I.Stack,{horizontal:!0,spacing:2},d.default.createElement(G.DatePicker,y({"data-testid":"datetimepicker-date",name:g,ariaLabel:m||e,error:typeof a=="string",selectedDate:c,selectedDateLabel:t=>`Date picker, current is ${t}`,onChange:R,size:j,onClear:P&&A,clearLabel:r,disabled:i},D)),d.default.createElement(J.TimePicker,{"data-testid":"datetimepicker-time",size:j,"aria-label":m||e,error:typeof a=="string",value:k,onChange:x,onClear:P&&O,clearLabel:r,selectButtonTitle:v,disabled:i,step:C})),d.default.createElement(Q.FieldHint,null),d.default.createElement(U.FieldError,{id:z})))};T.defaultProps=w.dateTimePickerDefaultProps;T.propTypes=w.dateTimePickerPropTypes;exports.DateTimePicker=T;
