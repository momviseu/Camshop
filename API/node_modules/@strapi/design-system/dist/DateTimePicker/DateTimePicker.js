var B = Object.defineProperty;
var g = Object.getOwnPropertySymbols;
var H = Object.prototype.hasOwnProperty, M = Object.prototype.propertyIsEnumerable;
var S = (t, r, i) => r in t ? B(t, r, { enumerable: !0, configurable: !0, writable: !0, value: i }) : t[r] = i, w = (t, r) => {
  for (var i in r || (r = {}))
    H.call(r, i) && S(t, i, r[i]);
  if (g)
    for (var i of g(r))
      M.call(r, i) && S(t, i, r[i]);
  return t;
};
var y = (t, r) => {
  var i = {};
  for (var a in t)
    H.call(t, a) && r.indexOf(a) < 0 && (i[a] = t[a]);
  if (t != null && g)
    for (var a of g(t))
      r.indexOf(a) < 0 && M.call(t, a) && (i[a] = t[a]);
  return i;
};
import n, { useState as F, useEffect as G } from "react";
import { Stack as h } from "../Stack/Stack.js";
import { DatePicker as J } from "../DatePicker/DatePicker.js";
import { TimePicker as K } from "../TimePicker/TimePicker.js";
import { Field as N } from "../Field/Field.js";
import { FieldLabel as O } from "../Field/FieldLabel.js";
import "../Field/FieldInput.js";
import { FieldHint as Q } from "../Field/FieldHint.js";
import { FieldError as U } from "../Field/FieldError.js";
import "../Field/FieldContext.js";
import "../Field/FieldAction.js";
import { useId as V } from "../helpers/useId.js";
import { parseDate as I } from "./parseDate.js";
import { dateTimePickerDefaultProps as W, dateTimePickerPropTypes as X } from "./DateTimePickerProps.js";
const _ = (Y) => {
  var $ = Y, {
    ariaLabel: t,
    clearLabel: r,
    disabled: i,
    error: a,
    hint: b,
    label: f,
    labelAction: v,
    onChange: m,
    onClear: T,
    name: E,
    required: x,
    selectButtonTitle: C,
    size: k,
    step: L,
    value: d
  } = $, u = y($, [
    "ariaLabel",
    "clearLabel",
    "disabled",
    "error",
    "hint",
    "label",
    "labelAction",
    "onChange",
    "onClear",
    "name",
    "required",
    "selectButtonTitle",
    "size",
    "step",
    "value"
  ]);
  const c = I(d), [s, p] = F(c), [D, l] = F(
    c ? `${c.getHours()}:${c.getMinutes()}:${c.getSeconds()}` : null
  ), R = (e) => {
    p(e);
    let o;
    D ? (o = new Date(e), o.setHours(D.split(":")[0]), o.setMinutes(D.split(":")[1])) : (o = new Date(e), l(`${o.getHours()}:${o.getMinutes()}:${o.getSeconds()}`)), m && m(o);
  }, j = (e) => {
    l(e);
    const o = s ? new Date(s) : new Date();
    o.setHours(e.split(":")[0]), o.setMinutes(e.split(":")[1]), s || p(o), m && m(o);
  }, q = () => {
    p(void 0), l(void 0), T();
  }, z = () => {
    l(void 0);
    let e;
    s && (e = new Date(s), e.setHours("00"), e.setMinutes("00")), m && m(e);
  };
  G(() => {
    if (d && +d != +s) {
      const e = I(d);
      p(e), l(
        e ? `${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}` : null
      );
    } else
      d || (p(void 0), l(void 0));
  }, [d, s]);
  const P = V("datetime-label", u == null ? void 0 : u.id), A = V("datetimepicker");
  return /* @__PURE__ */ n.createElement(N, {
    name: E,
    role: "group",
    "aria-labelledby": P,
    hint: b,
    error: a
  }, /* @__PURE__ */ n.createElement(h, {
    spacing: 1
  }, f && /* @__PURE__ */ n.createElement(O, {
    required: x,
    action: v,
    id: P
  }, f), /* @__PURE__ */ n.createElement(h, {
    horizontal: !0,
    spacing: 2
  }, /* @__PURE__ */ n.createElement(J, w({
    "data-testid": "datetimepicker-date",
    name: E,
    ariaLabel: f || t,
    error: typeof a == "string",
    selectedDate: s,
    selectedDateLabel: (e) => `Date picker, current is ${e}`,
    onChange: R,
    size: k,
    onClear: T && q,
    clearLabel: r,
    disabled: i
  }, u)), /* @__PURE__ */ n.createElement(K, {
    "data-testid": "datetimepicker-time",
    size: k,
    "aria-label": f || t,
    error: typeof a == "string",
    value: D,
    onChange: j,
    onClear: T && z,
    clearLabel: r,
    selectButtonTitle: C,
    disabled: i,
    step: L
  })), /* @__PURE__ */ n.createElement(Q, null), /* @__PURE__ */ n.createElement(U, {
    id: A
  })));
};
_.defaultProps = W;
_.propTypes = X;
export {
  _ as DateTimePicker
};
